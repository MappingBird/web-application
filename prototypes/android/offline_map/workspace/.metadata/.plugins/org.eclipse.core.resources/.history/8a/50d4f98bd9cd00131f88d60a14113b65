package com.mappingbird;

import org.json.JSONObject;
import org.apache.http.HttpResponse;
import org.apache.http.client.HttpClient;
import org.apache.http.client.methods.HttpGet;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.util.EntityUtils;

import android.os.AsyncTask;
import android.util.Log;

public class GeoBoundary extends AsyncTask<String, Void, JSONObject> {
	static String GEO_API = "https://maps.googleapis.com/maps/api/geocode/json?address=%s&sensor=false";
	static String TAG = "GeoBoundary";
	JSONObject json_ = null;
	
	public JSONObject getBounds (String keyword) {
		
		
	}
	
	protected JSONObject doInBackground(String keyword) {
		try {
			HttpClient client = new DefaultHttpClient();
			String uri = String.format(GEO_API, keyword);
			HttpGet getRequest = new HttpGet(uri);
			HttpResponse response;			
			response = client.execute(getRequest);
			String resp = EntityUtils.toString(response.getEntity());
Log.i(TAG, resp);			
			JSONObject json = new JSONObject(resp);
			json_ = json.getJSONObject("geometry").getJSONObject("bounds");
		} catch (Exception e) {
			java.io.StringWriter sw = new java.io.StringWriter();
			e.printStackTrace(new java.io.PrintWriter(sw));			
			Log.e(TAG, sw.toString());
		}								
		
		return json;
		
	}

	protected void onPostExecute(JSONObject rs) {
		Log.i(TAG, rs.toString());
	}
	
}
